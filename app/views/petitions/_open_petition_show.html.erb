<% content_for :head do %>
  <%= tag :meta, name: "count_url", content: count_petition_url(@petition) %>
<% end %>

<%= cache_for :petition do %>
  <%= render "content" %>

  <%= link_to t(:"ui.petitions.sign_this_petition"), new_petition_signature_path(petition), class: "button forward" %>

  <div class="signature-count">
    <p class="signature-count-number">
      <%= signature_count(:default, petition.signature_count) %>
    </p>
    <div class="signature-count-graph" aria-hidden="true">
      <span class="signature-count-current" style="width: <%= signatures_threshold_percentage(petition) %>"></span>
    </div>
    <p class="signature-count-goal">
      <%= number_with_delimiter(current_threshold(petition)) %>
    </p>
  </div>

  <%= render 'threshold_details', petition: petition %>
  <%= render 'other_parliamentary_business_details', petition: petition %>
  <%= render 'share_petition', petition: petition %>

  <ul class="petition-meta">
    <li class="meta-created-by">
      <span class="label"><%= t(:"ui.petitions.created_by") %></span> <%= petition.creator.name %>
    </li>
    <li class="meta-deadline">
      <span class="label"><%= t(:"ui.petitions.deadline") %></span> <%= short_date_format petition.deadline %>
      <span class="note"><%= t(:"ui.petitions.petitions_run_length") %></span>
    </li>
    <li class="meta-json">
      <span class="note"><%= link_to t(:"ui.petitions.get_json"), petition_path(petition, :json) %></span>
      <%= t(:"ui.petitions.about_petition_data_html") %>
    </li>
  </ul>
<% end %>
